[Unit]
Description=DNS Failover Agent
Documentation=https://github.com/clash-version/dnsfailover-agent
After=network-online.target
Wants=network-online.target

[Service]
Type=simple
User=root
Group=root
ExecStart=/usr/local/bin/dnsfailover monitor start
Restart=always
RestartSec=10
StandardOutput=journal
StandardError=journal

# 工作目录
WorkingDirectory=/etc/dnsfailover

# 从文件加载环境变量
EnvironmentFile=/etc/dnsfailover/.env

# 安全选项
NoNewPrivileges=true
PrivateTmp=true
ProtectSystem=strict
ProtectHome=true
ReadWritePaths=/etc/dnsfailover /var/log/dnsfailover

# 资源限制
LimitNOFILE=65536
LimitNPROC=512

[Install]
WantedBy=multi-user.target
